{% extends 'base.html' %}

<!-- {% block js%}

<body>
    <div id="root"></div>
    <script type="text/jsx" src="/static/js/travelNotes.jsx"></script>
</body>

{% endblock %} -->

{% block body %}

<div style= text-align:left>
    <div id="show-itinerary">
        <h3>{{itn_info["itn_name"]}}</h3>
        {% if itn_info["itn_location"] %}
            <b>Location: </b>{{itn_info["itn_location"]}}<br>
        {% endif %}
        <b>Start Date: </b>{{itn_info["start_date"]}}<br>
        <b>End Date: </b>{{itn_info["end_date"]}}<br><br>

        <div id="root">
            
        </div>

        {% if itn_info["experiences"] | length > 0 %}
        
            <b>Experiences: </b><br>
            {% for experience in itn_info["experiences"] %}
            <div id="show-itinerary{{experience["exp_id"]}}">
            <ul>
                <li><a href="{{experience["exp_url"]}}">{{experience["exp_name"]}}</a><br><br></li>
                <img src = "{{experience["exp_image"]}}"  width="300" height="300"><br><br>

                {% if itn_owner %}
                <button type="button" id="{{experience["exp_id"]}}" onclick="deleteExperience(id)">Delete</button><br><br>
                {% endif %}
            </ul>
        </div>
            {% endfor %}
        {% endif %}
       
    </div>
</div>
<script>
    function deleteExperience(id) {
        console.log(id);
        document.querySelector("#show-itinerary"+id).innerHTML = "";
        
        const queryString = new URLSearchParams({ expId: `${id}`}).toString();
        const url = `/delete-experience?${queryString}`;

        fetch(url)
            .then((response) => response.text())
            .then((response) => {
            });
    }
</script>

<script type="text/jsx" src="/static/js/travelNotes.jsx"></script>
{% endblock %}

